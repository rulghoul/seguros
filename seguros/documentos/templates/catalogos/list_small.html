{% extends 'base.html' %}

{% block title %}
  {{ titulo }}
{% endblock %}

{% block content %}
  <div class="row" style="margin-bottom: 1em; margin-top: 1em;">
    <h3 class="col-5">{{ titulo }}</h3>
    <a class="btn btn-secondary col-2" href="{{ add }}">{{ add_label }}</a>
    <input class="form-control col-4 ml-auto" id="myInput" type="text" placeholder="Buscar.." />
  </div>
  <form method="post" action="{% url 'index' %}">
    <table class="table table-striped table-sm">
      <thead class="thead-dark">
        <tr>
          <th>{{ encabezados.descripcion }}</th>
          <th>{{ encabezados.activo }}</th>
          <th></th>
        </tr>
      </thead>
      <tbody id="CuerpoCatalogo">
        {% if not form.instance.id %}
          <tr>
            {% include 'save.html' %}
          </tr>
        {% endif %}
        {% for elemento in lista %}
          <tr>
            {% if form.instance.id == score.id %}
              {% include 'save.html' %}
            {% else %}
              <td>{{ elemento.descripcion }}</td>
              <td>{{ elemento.bandactivo|yesno:'Activo,Inactivo,Indefinido' }}</td>
              <td class="text-center">
                <!-- Detail button -->
                <a type="button" formnovalidate class="read-book btn btn-sm btn-secondary" href="{% url detalle elemento.pk %}"><span class="fa fa-eye"></span></a>
                <!-- Update button -->
                <a type="button" formnovalidate class="update-book btn btn-sm btn-info" name="edit"  ><span class="fa fa-pencil"></span></a>
                <!-- Delete button -->
                <a type="button" formnovalidate class="delete-book btn btn-sm btn-dark" name="delete"><span class="fa fa-trash"></span></a>
              </td>
            {% endif %}
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </form>
  <script>
    $(document).ready(function () {
      $('#myInput').on('keyup', function () {
        var value = $(this).val().toLowerCase()
        $('#CuerpoCatalogo tr').filter(function () {
          $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        })
      })
    })
  </script>
{% endblock %}
